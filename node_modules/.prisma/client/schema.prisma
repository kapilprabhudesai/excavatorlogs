datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         Int         @id @default(autoincrement())
  email      String      @unique
  password   String
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  excavators Excavator[]
}

model Excavator {
  id        Int    @id @default(autoincrement())
  shortname String
  regNumber String
  userId    Int
  user      User   @relation(fields: [userId], references: [id])
  logs      Log[]
}

model Log {
  id          Int            @id @default(autoincrement())
  date        DateTime       @default(now())
  attachment  AttachmentType
  startTime   DateTime       @db.Timestamptz(0)
  endTime     DateTime       @db.Timestamptz(0)
  diesel      Float?
  excavatorId Int
  excavator   Excavator      @relation(fields: [excavatorId], references: [id])
}

enum AttachmentType {
  BUCKET
  BREAKER
}
